language: android

android:
  components:
    - tools
    - build-tools-29.0.0
    - android-29
    - extra-android-m2repository
  licenses:
    - 'android-sdk-license-.+'
    - 'google-gdk-license-.+'

before_install:
  - chmod +x gradlew

script:
  - ./gradlew assembleDebug

after_script:
  - cd app
  - cd build
  - cd outputs
  - cd apk
  - cd debug
  - ls -ll

deploy:
  provider: pre-releases
  api_key: "${GH_TOKEN}"
  file: "./app/build/outputs/apk/debug/app-debug.apk"
  skip_cleanup: true
  draft: true

branches:
  only:
    - nightly